<section class="container">
    <header class="header">
        <h2 i18n="@@products-title">Products</h2>
    </header>
    <form class="filters">

        <mat-form-field class="example-form-field">
            <mat-label i18n="@@search-label">Cerca</mat-label>
            <input matInput type="search" name="title" i18n-placeholder="@@search-placeholder"
                placeholder="Cerca per titolo" (input)="updateTitle($any($event.target).value)" />
        </mat-form-field>
        <mat-form-field class="example-form-field">
            <mat-label i18n="@@sort-label">Ordina per</mat-label>
            <mat-select (selectionChange)="updateSort($any($event.value))">
                <mat-option value="priceAsc" i18n="@@sort-price-asc">Prezzo (Crescente)</mat-option>
                <mat-option value="priceDesc" i18n="@@sort-price-desc">Prezzo (Decrescente)</mat-option>
                <mat-option value="dateAsc" i18n="@@sort-date-asc">Data (Crescente)</mat-option>
                <mat-option value="dateDesc" i18n="@@sort-date-desc">Data (Decrescente)</mat-option>
            </mat-select>
        </mat-form-field>
        <mat-form-field class="example-form-field">
            <mat-label i18n="@@price-min-label">Prezzo minimo</mat-label>
            <input matInput type="number" name="priceMin" i18n-placeholder="@@price-min-placeholder"
                placeholder="Prezzo minimo" (input)="updateMin($any($event.target).value)" max="10000" step="0.1" />
        </mat-form-field>
        <mat-form-field class="example-form-field">
            <mat-label i18n="@@price-max-label">Prezzo massimo</mat-label>
            <input matInput type="number" name="priceMax" i18n-placeholder="@@price-max-placeholder"
                placeholder="Prezzo massimo" (input)="updateMax($any($event.target).value)" min="0" step="0.1" />
        </mat-form-field>

    </form>
    <mat-paginator [length]="(products$ | async)?.length || 0" [pageSize]="pageSize"
        [pageIndex]="((page$ | async)||1)-1" i18n-aria-label="@@paginator-aria" aria-label="Seleziona pagina"
        (page)="onPage($event)">
    </mat-paginator>

    @for (p of paged$ | async; track p.id) {

    <app-product-card [product]="p" (add)="onAddToCart($event)">
    </app-product-card>

    } @empty {
    <p i18n="@@no-products-found">Nessun prodotto trovato</p>
    }


</section>